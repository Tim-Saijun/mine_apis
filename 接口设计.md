**Redis**** 、数据库处理原则 ****按照之前讨论的进行，存数据的时候两个都存，只有读取数据的时候不一样**

**文件处理原则**** ：单独分类存放各种文件的 ****md5**** ，然后根据 ****md5**** 找到对应文件相关信息**

**上传**** ASV ****文件** 首先判断文件是否存在，然后判断文件是否标注

存在 1.标注过 返回picks\_p picks\_s
528998成
2.未标注过 返回未标注

不存在 上传文件

上传ASV文件，保存在服务器，同时生成md5 作为相应的键值，并设定pick为0

判断文件是否存在 分为

Redis中存在 是否标注过 标注过 返回所需参数 未标注过 返回未标注 前端可以设置一个按钮，覆盖式上传，搜索式上传

Redis中不存在 数据库存在 数据库返回相应数据 现在Redis中存放 然后按照Redis中存在的情形处理

都不存在 先存Redis 标记pick为0 然后数据库存

另外，这里需要加上，后面要用，另外考虑一下用txt文件，还是Redis中的列表，我个人觉得Redis中的列表好一点

还要有反向以矿区为键值的列表，还要有存放asv md5的列表

不一定非要使用列表 txt文件什么的也可以

**标注波形**

这一步先要获取asv文件列表，选择asv文件，进行标注

返回的数据先给Redis Redis存完给数据库

**获波形文件列表**

获取所有波形文件，先获取存放asv文件md5的全部内容，然后根据md5寻找，现在Redis中找，然后再数据库中找，都找不到就删除对应md5

**震源定位**

根据前面的波形文件列表，选择波形文件，前端返回选择文件的md5，后端根据md5在服务器寻找相应文件，进行波形文件定位

**获取震源列表**

一个震区有好多震源，对应很多asv文件，所以在上传acv文件的同时，需要反向用震区为关键字设定一个列表，列表中存储相应文件的md5，震源定位后，将对应的md5记录在震区组成的列表

此时获取Redis中所有矿区对应列表的md5，根据md5获得相应文件信息

**上传**** DXF ****文件**

单独设计一个Redis中的列表或者一个txt文件，里面存储dcf文件对应的md5，

一个txt文件存储标注过震源的md5，一个存储没有标注过震源的md5

一个txt文件存储asv文件对应的md5

**获取**** DXF ****文件列表**

根据存放dxf文件md5的txt文件，得到所有md5，并根据md5返回对应文件信息
